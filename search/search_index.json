{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u00davod","text":"<p>Knowspread je learning management syst\u00e9m - LMS.</p>"},{"location":"#pro-studenty","title":"Pro studenty","text":""},{"location":"#pro-tvurce-obsahu","title":"Pro tv\u016frce obsahu","text":""},{"location":"#pro-spravce-systemu","title":"Pro spr\u00e1vce syst\u00e9mu","text":""},{"location":"pro-studenty/","title":"Pro studenty","text":"<p>Knowspread je learning management syst\u00e9m - LMS.</p>"},{"location":"pro-studenty/01-nastenka/","title":"N\u00e1st\u011bnka studenta","text":""},{"location":"pro-studenty/01-nastenka/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"pro-studenty/01-nastenka/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"pro-studenty/01-nastenka/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"pro-studenty/01-nastenka/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"pro-studenty/01-nastenka/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"pro-studenty/01-nastenka/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"pro-studenty/01-nastenka/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"pro-studenty/01-nastenka/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"pro-studenty/01-nastenka/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"pro-studenty/01-nastenka/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"},{"location":"pro-studenty/02-prohlizec/","title":"Studium","text":""},{"location":"pro-studenty/02-prohlizec/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"pro-studenty/02-prohlizec/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"pro-studenty/02-prohlizec/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"pro-studenty/02-prohlizec/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"pro-studenty/02-prohlizec/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"pro-studenty/02-prohlizec/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"pro-studenty/02-prohlizec/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"pro-studenty/02-prohlizec/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"pro-studenty/02-prohlizec/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"pro-studenty/02-prohlizec/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"},{"location":"pro-studenty/03-certifik%C3%A1ty/","title":"Certifik\u00e1ty studia","text":""},{"location":"pro-studenty/03-certifik%C3%A1ty/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"pro-studenty/03-certifik%C3%A1ty/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"pro-studenty/03-certifik%C3%A1ty/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"pro-studenty/03-certifik%C3%A1ty/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"pro-studenty/03-certifik%C3%A1ty/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"pro-studenty/03-certifik%C3%A1ty/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"pro-studenty/03-certifik%C3%A1ty/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"pro-studenty/03-certifik%C3%A1ty/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"pro-studenty/03-certifik%C3%A1ty/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"pro-studenty/03-certifik%C3%A1ty/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"},{"location":"pro-studenty/04-notifikace/","title":"Studijn\u00ed notifikace","text":""},{"location":"pro-studenty/04-notifikace/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"pro-studenty/04-notifikace/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"pro-studenty/04-notifikace/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"pro-studenty/04-notifikace/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"pro-studenty/04-notifikace/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"pro-studenty/04-notifikace/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"pro-studenty/04-notifikace/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"pro-studenty/04-notifikace/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"pro-studenty/04-notifikace/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"pro-studenty/04-notifikace/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"},{"location":"sprava-systemu/","title":"Pro spr\u00e1vce","text":"<p>Knowspread je learning management syst\u00e9m - LMS.</p>"},{"location":"sprava-systemu/sprava-uzivatelu/","title":"Spr\u00e1va u\u017eivatel\u016f","text":""},{"location":"sprava-systemu/sprava-uzivatelu/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"sprava-systemu/sprava-uzivatelu/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"sprava-systemu/sprava-uzivatelu/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"sprava-systemu/sprava-uzivatelu/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"sprava-systemu/sprava-uzivatelu/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"sprava-systemu/sprava-uzivatelu/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"sprava-systemu/sprava-uzivatelu/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"sprava-systemu/sprava-uzivatelu/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"sprava-systemu/sprava-uzivatelu/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"sprava-systemu/sprava-uzivatelu/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"},{"location":"tvorba-obsahu/","title":"Pro tv\u016frce obsahu","text":"<p>Knowspread je learning management syst\u00e9m - LMS.</p>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/","title":"Tvorba obsahu","text":""},{"location":"tvorba-obsahu/01-tvorba-obsahu/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"tvorba-obsahu/01-tvorba-obsahu/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"tvorba-obsahu/01-tvorba-obsahu/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"},{"location":"tvorba-obsahu/02-tvorba-testu/","title":"Tvorba test\u016f","text":""},{"location":"tvorba-obsahu/02-tvorba-testu/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"tvorba-obsahu/02-tvorba-testu/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"tvorba-obsahu/02-tvorba-testu/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"tvorba-obsahu/02-tvorba-testu/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"tvorba-obsahu/02-tvorba-testu/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"tvorba-obsahu/02-tvorba-testu/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"tvorba-obsahu/02-tvorba-testu/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"tvorba-obsahu/02-tvorba-testu/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"tvorba-obsahu/02-tvorba-testu/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"tvorba-obsahu/02-tvorba-testu/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/","title":"Schvalov\u00e1n\u00ed obsahu","text":""},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"tvorba-obsahu/03-schvalovani-obsahu/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"},{"location":"tvorba-obsahu/04-sprava-cen/","title":"Spr\u00e1va cen","text":""},{"location":"tvorba-obsahu/04-sprava-cen/#maintenance-mode","title":"Maintenance mode","text":"<p>App platform does not support maintenance mode. I can be achieved in Cloudflare by: - proxying knowspread.com CNAMEs through Cloudflare (setting them as \"proxied\") - enabling Page Rule which forwards traffic to our maintenance page</p> <p>Maintenance page is git tracked <code>public/maintenance.html</code> and can be updated manually by logging into AWS S3. (How nice would it be to have it done by a rake task?!)</p>"},{"location":"tvorba-obsahu/04-sprava-cen/#certificate-management","title":"Certificate management","text":"<p>App platform only supports automated certificate management, not custom certs. Certificates are issued by Cloudflare for 1 year. Current production cert expires Friday, 1 March 2024.</p>"},{"location":"tvorba-obsahu/04-sprava-cen/#scaling","title":"Scaling","text":"<p>App components can be manually scaled vertically and horizontally.</p> <p>Question about autoscaling from February 25, 2022 is unanswered.</p> <p>There's an article about building custom auto-scaler.</p>"},{"location":"tvorba-obsahu/04-sprava-cen/#new-environment-new-app","title":"New environment (new app)","text":"<ul> <li>easiest way to create a new app (environment) is to save app spec from current app settings, update it and create a new app by calling <code>doctl app create --spec spec.yaml</code></li> <li>an app can be created manually in UI, but the UI is not capable of adding a job (for database migration)</li> </ul>"},{"location":"tvorba-obsahu/04-sprava-cen/#postgres-cluster","title":"Postgres cluster","text":""},{"location":"tvorba-obsahu/04-sprava-cen/#backups","title":"Backups","text":"<p>Postgres cluster has point-in-time backups worth 7 days. It can be restored to a new cluster.</p>"},{"location":"tvorba-obsahu/04-sprava-cen/#connection-pool","title":"Connection pool","text":"<p>Outdated info (support told me it should work, but I haven't tested it yet): - While DO supports setup of connection pool, it is not possible to use it in apps with combination of Trusted Sources. Either connect directly to database, or disable Trusted Sources in the cluster.</p>"},{"location":"tvorba-obsahu/04-sprava-cen/#new-user-grant-privileges","title":"New user - grant privileges","text":"<p>Modify user privileges:</p> <pre><code>GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO username;\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO username;\nGRANT CONNECT ON DATABASE database TO username;\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL PRIVILEGES ON TABLES TO development;\nGRANT ALL ON schema public TO knowspread;\n</code></pre>"},{"location":"tvorba-obsahu/04-sprava-cen/#redis","title":"Redis","text":"<p>For each dev environment, use <code>rediss://connection/index_number</code> where <code>index_number</code> is a separate database from 0 to 10.</p>"},{"location":"tvorba-obsahu/04-sprava-cen/#dev-console","title":"Dev console","text":"<p>Use web-console from the app's Digital Ocean web UI.</p>"}]}